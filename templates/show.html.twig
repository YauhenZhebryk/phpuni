{% extends 'secondpage.html.twig' %}
{%  block headertitle %}List{% endblock %}
{% block title %}Product List{% endblock %}

{% block body %}
    <div class="container" style="text-align: center">
        <h1>Product List</h1>

        {% if products is not empty %}
            <div class="row">
                {% for product in products %}
                        <div class="card" style="margin: 5px 0">
                            <div class="card-body">
                                <h5 class="card-title">{{ product.name }}</h5>
                                <p class="card-text">Price: ${{ product.price }}</p>
                                {% if product.image %}
                                    <img src="{{ asset('uploads/images/' ~ product.image) }}" alt="{{ product.name }}" style="max-width: 200px;">
                                {% endif %}
                                <p class="card-text">{{ product.description }}</p>

                                <p class="card-text"><strong>Brand:</strong> {{ product.brand.name }}</p>
                                <p class="card-text"><strong>Categories:</strong>
                                    {% for category in product.category %}
                                        {{ category.name }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </p>

                                {% if is_granted('ROLE_ADMIN') %}
                                    <a href="{{ path('product_delete', {'id': product.id}) }}" class="delete_button">Delete</a>
                                {% endif %}
                            </div>
                        </div>

                {% endfor %}
        {% else %}
            <p>No products found.</p>
        {% endif %}

    </div>
{% endblock %}